<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    


    <button onclick="fetchpost()">Fetch Posts</button>



    <script>


        //GLOBAL VARIABLE
        // let postdata;
        // function fetchpost(){
        //     fetch('https://jsonplaceholder.typicode.com/posts/1')
        //     .then((response) => response.json())
        //     .then((data) => postdata=data);
            
        // }
        // console.log(postdata);   //gives undefined as fetchpost is asynchronous so this lines gets 
                                    //executed even before the fetching of data
        




        //RETURNING FROM FUNCTION
        // function fetchpost(){
        //     fetch('https://jsonplaceholder.typicode.com/posts/1')
        //     .then((response) => response.json())
        //     .then((data) => {return data});
        // }
        // function initfunction(){
        //     const postdata = fetchpost();
        //     console.log(postdata);  //gives undefined as fetchpost when called is asynchronous so 
        //     //execution moves further and there is no other statement in fetchpost so it moves to 
        //     //console statement of initfunction therefore before getting data we get undefined as fetchpost is 
        //     //asynchronous so this lines gets executed even before the fetching
        // }    
        // initfunction();






        //HOW CALLBACK WORKS
        // function fetchpost(cb){
        //     fetch('https://jsonplaceholder.typicode.com/posts/1')
        //     .then((response) => response.json())
        //     .then((data) => {cb()});
        // }
        // const processpostData=()=>{
        //     console.log("process Data");
        // }
        // function initfunction(){
        //     const postdata = fetchpost(processpostData);
        //     console.log(postdata);   
        // }    
        // initfunction();
        // //output-->first undefined and then  process Data as fetchpost is asynchronous and it keeps the then statement
        // //on hold and goes to console statement of the initfunction and then comes back to then statment and invokes
        // //processpostData and prints the process Data






        
        //USING CALLBACK         -->SOLUTION FOR FETCHING DATA OUTSIDE
        function fetchpost(cb){
            fetch('https://jsonplaceholder.typicode.com/posts/1')
            .then((response) => response.json())
            .then((data) => {cb(data)});
        }
        const processpostData=(d)=>{
            console.log(d);
        }
        function initfunction(){
            const postdata = fetchpost(processpostData); 
        }    
        initfunction();

    </script>    
</body>
</html>